<template>
  <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="example-component/app.css" rel="stylesheet">

  <script>
    var AbstractTracker = require('trackers/abstract-tracker')['default'];
    var customOutputTrackerFactory = function() {
      var numFadingIn = 0;
      var logger = function(label, params) {
        var message = 'tracker.%@(%@)'.fmt(label, JSON.stringify(params));
        var $new = $('<div style="display:none;"> <code>' + message + '</code> <hr> </div>');
        $('#example-component-output').prepend($new);
        numFadingIn++;
        setTimeout(function(){
          $new.show('slow', function() { numFadingIn--; });
        }, (numFadingIn-1) * 500);
      };

      var Tracker = AbstractTracker.extend({
        getTracker: function() {
          return logger;
        },
        set: function(key, value) {
          logger('set', [key, value]);
        },
        send: function(fieldNameObj) {
          logger('send', [fieldNameObj]);
        },
        sendEvent: function(category, action, label, value) {
          logger('sendEvent', [category, action, label, value]);
        },
        trackPageView: function(path, fieldNameObj) {
          logger('trackPageView', ['pageview', path, fieldNameObj]);
        },
        applyAppFields: function() {
          logger('applyAppFields');
        }
      });
      return new Tracker();
    };

  </script>

  <script type="text/x-handlebars">
    <ul class="nav nav-tabs">
      {{#link-to 'index'     tagName='li' disabled='true'}}<a>Task</a>{{/link-to}}
      {{#link-to 'execution' tagName='li' disabled='true'}}<a>Execution</a>{{/link-to}}
      {{#link-to 'result'    tagName='li' disabled='true'}}<a>Result</a>{{/link-to}}
    </ul>
    <div class="tab-content">
      {{outlet}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    <div role="tabpanel" class="tab-pane fade in active">
      <p>Abstract: Submit an application form:</p>
      <blockquote>
        <ol>
          <li>Type 'Mnemonics' as a Ticket ID</li>
          <li>Choose a Should option</li>
          <li>Check both S and L options</li>
        </ol>
      </blockquote>
      <button type="button" class="btn btn-default" {{action 'next'}}>
        <span class="glyphicon glyphicon-time" aria-hidden="true"></span> Proceed
      </button>
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="execution">
    <div role="tabpanel" class="tab-pane fade in active">
      <form>
        <div class="form-group">
          <div class="radio">
            <label>
              {{ radio-button name='radio' value=radioButtons.must selectedRadio=model.selectedRadio}}
              Option Must is this and that&mdash;be sure to include why it's great
            </label>
          </div>
          <div class="radio">
            <label>
              {{ radio-button name='radio' value=radioButtons.should selectedRadio=model.selectedRadio}}
              Option Should can be something else and selecting it will deselect option Must
            </label>
          </div>
          <div class="radio disabled">
            <label>
              {{ radio-button name='radio' value=radioButtons.could selectedRadio=model.selectedRadio disabled='true'}}
              Option Could is disabled
            </label>
          </div>
          <div class="radio">
            <label>
              {{ radio-button name='radio' value=radioButtons.wont selectedRadio=model.selectedRadio}}
              Option Won't can be something else and selecting it will deselect option Should
            </label>
          </div>
        </div>
        <div class="form-group">
          <div class="checkbox">
            <label>
              {{ input type="checkbox" checked=model.checkedOptions.s }}
              Option S is this and that&mdash;be sure to include why it's great
            </label>
          </div>
          <div class="checkbox">
            <label>
              {{ input type="checkbox" checked=model.checkedOptions.o }}
              Option O is this and that&mdash;be sure to include why it's great
            </label>
          </div>
          <div class="checkbox">
            <label>
              {{ input type="checkbox" checked=model.checkedOptions.l }}
              Option L is this and that&mdash;be sure to include why it's great
            </label>
          </div>
          <div class="checkbox disabled">
            <label>
              {{ input type="checkbox" disabled='' checked=model.checkedOptions.i }}
              Option I is disabled
            </label>
          </div>
          <div class="checkbox">
            <label>
              {{ input type="checkbox" checked=model.checkedOptions.d }}
              Option D is this and that&mdash;be sure to include why it's great
            </label>
          </div>
        </div>
        <div class="form-group">
          {{input value=model.taskID class='form-control' placeholder='Task ID'}}
        </div>
        <button type="submit" class='btn btn-default' {{action 'submit'}}>
          <span {{bind-attr class=":glyphicon model.attempts:glyphicon-repeat:glyphicon-ok"}}></span>
          Submit
        </button>
        {{#if model.firstAttempt }}
          <span class="text-danger">Left last attempt</span>
        {{/if}}
      </form>
    </div>
  </script>
  <script type="text/x-handlebars" data-template-name="result">
    <div role="tabpanel" class="tab-pane fade in active">
      <blockquote>
        <ol>
          <li>
            <span {{bind-attr class="model.validateInput:text-success:text-danger"}}>
              {{#if model.taskID}}
                {{model.taskID}}
              {{else}}
                nothing typed
              {{/if}}
            </span> as a Ticket ID
            {{#unless model.validateInput}}('Mnemonics' expected){{/unless}}
          </li>
          <li>Choose a <span {{bind-attr class="model.validateRadio:text-success:text-danger"}}>Should</span> option</li>
          <li>
            Check both <span {{bind-attr class="model.checkedOptions.s:text-success:text-danger"}}>S</span>
            and <span {{bind-attr class="model.checkedOptions.l:text-success:text-danger"}}>L</span> options
          </li>
        </ol>
      </blockquote>
      <button type="button" class="btn btn-default" {{action 'restart'}}>
        <span class="glyphicon glyphicon-repeat" aria-hidden="true"></span> Try Again
      </button>
    </div>
  </script>

  <div id="example-component-wrapper">
    <div class="container-fluid">
      <div class="col-xs-6">
        <h4>application</h4>
        <div id="example-component-container"></div>
      </div>
      <div class="col-xs-6">
        <h4>output</h4>
        <div id="example-component-output"></div>
      </div>
    </div>
  </div>

  <script src="example-component/initializer.js"></script>
  <script src="example-component/app.js"></script>
</template>

<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script src="bower_components/handlebars/handlebars.min.js"></script>
<script src="bower_components/ember/ember.min.js"></script>

<script src="bower_components/almond/almond.js"></script>
<script src="bower_components/ember-insights/ember-insights.amd.min.js"></script>
